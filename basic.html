<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>è³‡é€šå®‰å…¨åŸºæœ¬æ¦‚å¿µæ¸¬é©—</title>
<style>
body{font-family:"Microsoft JhengHei",sans-serif;background:#0f172a;color:#e5e7eb;padding:20px;}
h1,h2{color:#38bdf8;}
.section{background:#020617;padding:15px;border-radius:8px;margin-bottom:20px;}
.question{margin-bottom:15px;}
input{padding:5px;margin:5px;}
button{background:#38bdf8;border:none;padding:10px 20px;font-size:16px;border-radius:6px;cursor:pointer;}
button:hover{background:#0ea5e9;}
table{width:100%;border-collapse:collapse;}
th,td{border:1px solid #334155;padding:8px;text-align:center;}
th{background:#1e293b;}
</style>
</head>
<body>

<h1>ğŸ›¡ï¸ è³‡é€šå®‰å…¨åŸºæœ¬æ¦‚å¿µæ¸¬é©—ï¼ˆ20 é¡Œï¼‰</h1>

<div class="section">
  <h2>ğŸ‘¨â€ğŸ“ å­¸ç”Ÿè³‡æ–™</h2>
  ç­ç´šï¼š<input id="className">
  åº§è™Ÿï¼š<input id="no">
  å§“åï¼š<input id="name">
</div>

<div class="section" id="quiz"></div>
<button onclick="submitQuiz()">æäº¤æ¸¬é©—</button>
<h2 id="result"></h2>

<hr>

<div class="section" id="teacherLoginDiv">
  <h2>ğŸ” æ•™å¸«ç™»å…¥</h2>
  æ•™å¸«å¯†ç¢¼ï¼š<input type="password" id="teacherPwd">
  <button onclick="teacherLogin()">ç™»å…¥</button>
  <p id="loginMsg" style="color:#f87171"></p>
</div>

<div class="section" id="teacherArea" style="display:none">
  <h2>ğŸ‘¨â€ğŸ« æ•™å¸«æˆç¸¾ç¸½è¦½</h2>
  <button onclick="exportCSV()">åŒ¯å‡º CSV</button>
  <table>
    <thead>
      <tr>
        <th>ç­ç´š</th><th>åº§è™Ÿ</th><th>å§“å</th><th>åˆ†æ•¸</th><th>æ™‚é–“</th>
      </tr>
    </thead>
    <tbody id="records"></tbody>
  </table>
</div>

<script>
const TEACHER_PASSWORD = "teacher123"; // æ•™å¸«å¯†ç¢¼

// é¡Œåº« 20 é¡Œ
const questions = [
 {q:"è³‡é€šå®‰å…¨æ ¸å¿ƒç›®æ¨™ï¼Ÿ",o:["æå‡é€Ÿåº¦","CIA ä¸‰åŸå‰‡","å¢åŠ è¨­å‚™","é™ä½æˆæœ¬"],a:1},
 {q:"CIA ä¸åŒ…å«ï¼Ÿ",o:["æ©Ÿå¯†æ€§","å®Œæ•´æ€§","å¯ç”¨æ€§","ä¾¿åˆ©æ€§"],a:3},
 {q:"ç¤¾äº¤å·¥ç¨‹ä¾‹å­ï¼Ÿ",o:["æ¼æ´æƒæ","èª˜é¨™å¯†ç¢¼","DDoS","ç ´è§£"],a:1},
 {q:"é™ä½å¸³è™Ÿè¢«ç›œï¼Ÿ",o:["é‡è¤‡å¯†ç¢¼","å¤šå› ç´ é©—è­‰","å¯«ç´™ä¸Š","ç”Ÿæ—¥"],a:1},
 {q:"ä¸æ˜¯æƒ¡æ„ç¨‹å¼ï¼Ÿ",o:["ç—…æ¯’","æœ¨é¦¬","è •èŸ²","é˜²ç«ç‰†"],a:3},
 {q:"é‡£é­šéƒµä»¶ç‰¹å¾µï¼Ÿ",o:["å®˜æ–¹ä¿¡ç®±","æ€¥è¿«è¦æ±‚","ç„¡éŒ¯å­—","å…§éƒ¨æ–‡ä»¶"],a:1},
 {q:"å…¬å…± Wi-Fi å®‰å…¨ï¼Ÿ",o:["ç™»å…¥éŠ€è¡Œ","è¼¸å¯†ç¢¼","é¿å…é‡è¦æ“ä½œ","é—œé˜²ç«ç‰†"],a:2},
 {q:"å€‹è³‡å¤–æ´©åŸå› ï¼Ÿ",o:["æ›´æ–°","äº‚è£ App","é˜²æ¯’","é–å±"],a:1},
 {q:"é˜²ç«ç‰†åŠŸèƒ½ï¼Ÿ",o:["å‚™ä»½","é˜»æ“‹æœªæˆæ¬Š","åŠ é€Ÿ","å–ä»£é˜²æ¯’"],a:1},
 {q:"MFA ç¯„ä¾‹ï¼Ÿ",o:["è¤‡é›œå¯†ç¢¼","å¯†ç¢¼+ç°¡è¨Š","æ›å¯†ç¢¼","è‡ªå‹•ç™»å…¥"],a:1},
 {q:"ä¸æ›´æ–°ä¿®è£œï¼Ÿ",o:["è®Šæ…¢","æ¼æ´è¢«ç”¨","å®¹é‡å¢","ç•«é¢éŒ¯"],a:1},
 {q:"å¥½å¯†ç¢¼ï¼Ÿ",o:["é€£è™Ÿ","å§“å","å¤§å°å¯«ç¬¦è™Ÿ","å¸³è™ŸåŒ"],a:2},
 {q:"å‚™ä»½ç¢ºä¿ï¼Ÿ",o:["æ©Ÿå¯†","å®Œæ•´","å¯ç”¨","å¯è®€"],a:2},
 {q:"é˜²å‹’ç´¢ï¼Ÿ",o:["é—œæ©Ÿ","ä¸ç”¨ç¶²è·¯","å®šæœŸå‚™ä»½","åŒå¯†ç¢¼"],a:2},
 {q:"IDS åŠŸèƒ½ï¼Ÿ",o:["é˜»æ“‹","åµæ¸¬é€šå ±","å–ä»£é˜²ç«ç‰†","åŠ å¯†"],a:1},
 {q:"æœ€å°æ¬Šé™ï¼Ÿ",o:["å…¨ç®¡ç†å“¡","åªçµ¦å¿…è¦","å…±ç”¨å¸³è™Ÿ","å…¬é–‹å¯†ç¢¼"],a:1},
 {q:"éŒ¯èª¤ USBï¼Ÿ",o:["æ’ä¸æ˜ USB","æƒæ¯’","é™åˆ¶","é¿å…äº‚æ’"],a:0},
 {q:"è³‡å®‰äº‹ä»¶ï¼Ÿ",o:["æ­£å¸¸é—œæ©Ÿ","æœªæˆæ¬Šå­˜å–","æ›´æ–°","åˆæ³•"],a:1},
 {q:"ä¿è­·éš±ç§ï¼Ÿ",o:["å…¬é–‹å¯†ç¢¼","æ­éœ²å€‹è³‡","è¨­å®šéš±ç§","å…±ç”¨å¸³è™Ÿ"],a:2},
 {q:"è³‡å®‰æ•™è‚²ç›®çš„ï¼Ÿ",o:["å¢åŠŸèƒ½","æå‡æ„è­˜","é™æˆæœ¬","å°‘ä¸Šç¶²"],a:1}
];

// é¡Œç›®éš¨æ©Ÿæ’åºä¸¦ç”Ÿæˆ
window.onload = function(){
  questions.sort(()=>Math.random()-0.5);
  const quizDiv = document.getElementById("quiz");
  questions.forEach((q,i)=>{
    let html = `<div class="question"><b>${i+1}. ${q.q}</b><br>`;
    q.o.forEach((o,j)=>{
      html += `<label><input type="radio" name="q${i}" value="${j}"> ${o}</label><br>`;
    });
    html += "</div>";
    quizDiv.innerHTML += html;
  });
}

// å­¸ç”Ÿæäº¤
function submitQuiz(){
  const c = document.getElementById("className").value;
  const n = document.getElementById("no").value;
  const nm = document.getElementById("name").value;
  if(!c||!n||!nm){alert("è«‹å¡«å®Œæ•´å­¸ç”Ÿè³‡æ–™"); return;}

  // é˜²æ­¢é‡è¤‡æäº¤
  const key = `${c}_${n}_${nm}`;
  if(localStorage.getItem(key)){
    alert("ä½ å·²ç¶“æäº¤éäº†ï¼Œç„¡æ³•å†æäº¤ï¼");
    return;
  }

  let score = 0;
  questions.forEach((q,i)=>{
    const s = document.querySelector(`input[name="q${i}"]:checked`);
    if(s && +s.value===q.a) score++;
  });
  document.getElementById("result").innerText = `ä½ çš„æˆç¸¾ï¼š${score} / 20`;

  // å­˜æˆç¸¾
  const data = JSON.parse(localStorage.getItem("records")||"[]");
  data.push({class:c,no:n,name:nm,score:score,time:new Date().toLocaleString()});
  localStorage.setItem("records", JSON.stringify(data));

  // æ¨™è¨˜æ­¤å­¸ç”Ÿå·²æäº¤
  localStorage.setItem(key, score);

  loadRecords(); // æ›´æ–°æ•™å¸«å€
}

// æ•™å¸«ç™»å…¥
function teacherLogin(){
  const pwd = document.getElementById("teacherPwd").value;
  if(pwd===TEACHER_PASSWORD){
    document.getElementById("teacherLoginDiv").style.display="none";
    document.getElementById("teacherArea").style.display="block";
    loadRecords();
  } else {
    document.getElementById("loginMsg").innerText="âŒ å¯†ç¢¼éŒ¯èª¤";
  }
}

// è¼‰å…¥æˆç¸¾
function loadRecords(){
  const tbody = document.getElementById("records");
  tbody.innerHTML = "";
  const data = JSON.parse(localStorage.getItem("records")||"[]");
  data.forEach(r=>{
    tbody.innerHTML += `<tr>
      <td>${r.class}</td>
      <td>${r.no}</td>
      <td>${r.name}</td>
      <td>${r.score}</td>
      <td>${r.time}</td>
    </tr>`;
  });
}

// CSV åŒ¯å‡º
function exportCSV(){
  const data = JSON.parse(localStorage.getItem("records")||"[]");
  let csv="ç­ç´š,åº§è™Ÿ,å§“å,åˆ†æ•¸,æ™‚é–“\n";
  data.forEach(r=>{
    csv+=`${r.class},${r.no},${r.name},${r.score},${r.time}\n`;
  });
  const a = document.createElement("a");
  a.href = URL.createObjectURL(new Blob([csv], {type:"text/csv"}));
  a.download = "è³‡é€šå®‰å…¨æ¸¬é©—æˆç¸¾.csv";
  a.click();
}
</script>

</body>
</html>
